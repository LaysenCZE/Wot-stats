<!DOCTYPE html>
<html lang="cs" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WoT Stats – stable v5</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class'};</script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .card{ background: rgba(15,23,42,.6); border:1px solid rgba(255,255,255,.1); border-radius: 16px; }
    .btn{ display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius:16px; padding:.5rem 1rem; font-weight:600; border:1px solid rgba(255,255,255,.1); transition:transform .08s ease; }
    .btn:active{ transform: scale(.97); }
    .btn-primary{ background-image: linear-gradient(135deg,#2563eb,#06b6d4); }
    .btn-emerald{ background-image: linear-gradient(135deg,#059669,#0d9488); }
    .btn-purple{ background-image: linear-gradient(135deg,#4f46e5,#d946ef); }
    .chip{ font-size:.75rem; padding:.125rem .5rem; border-radius:9999px; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.1); }
    .badge{ font-size:.75rem; padding:.1rem .5rem; border-radius:9999px; border:1px solid currentColor; }
    .modal{ position:fixed; inset:0; z-index:50; display:none; }
    .modal.open{ display:block; }
    .modal-backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.6); }
    .modal-body{ position:relative; margin:4rem auto 0; max-width:720px; }
    #loader{ position:fixed; inset:0; z-index:100; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.6); }
    #loader.show{ display:flex; }
    .spinner{ width:56px; height:56px; border:5px solid rgba(255,255,255,.2); border-top-color:#fff; border-radius:50%; animation:spin 1s linear infinite; }
    @keyframes spin{ to{ transform: rotate(360deg);} }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-900 via-slate-950 to-black text-slate-100">
  <div id="loader"><div class="spinner"></div></div>
  <header class="sticky top-0 z-40 backdrop-blur bg-slate-900/80 border-b border-white/5">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="chip">beta</span>
        <h1 class="text-xl font-bold">WoT Stats</h1>
      </div>
      <div class="flex items-center gap-2">
        <select id="region" class="bg-slate-800/70 border border-white/10 rounded-xl px-3 py-2">
          <option value="eu" selected>EU</option>
          <option value="na">NA</option>
          <option value="asia">ASIA</option>
          <option value="ru">RU</option>
        </select>
        <button id="toggleTheme" class="btn btn-purple" title="Přepnout téma"><span data-lucide="sun"></span><span class="hidden md:inline">Téma</span></button>
        <button id="openInfo" class="btn btn-emerald"><span data-lucide="info"></span><span class="hidden md:inline">Info & Novinky</span></button>
      </div>
    </div>
  </header>

  <!-- Info modal -->
  <div id="infoModal" class="modal">
    <div class="modal-backdrop" onclick="closeModal('infoModal')"></div>
    <div class="modal-body">
      <div class="card p-6">
        <div class="flex items-center justify-between mb-3">
          <h3 class="text-lg font-semibold">O stránce</h3>
          <button class="btn" onclick="closeModal('infoModal')">Zavřít</button>
        </div>
        <p class="text-slate-300 mb-4">
          Tahle stránka je neoficiální přehled a vizualizace statistik <b>World of Tanks</b> nad veřejným WG API.
          Funguje čistě v prohlížeči, nic nikam neukládá (kromě volitelného lokálního snapshotu pro „Poslední bitvy“).
        </p>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h4 class="font-semibold mb-2">Co umí</h4>
            <ul class="list-disc ml-6 space-y-1 text-slate-300">
              <li><b>Hledání hráče</b> – KPI (bitvy, výhry, WR, DMG…)</li>
              <li><b>Garáž</b> – karty tanků s tierem, třídou, národem a statistikami</li>
              <li><b>Grafy</b> – Výhry vs Prohry, Top 10 DMG, rozložení podle tříd, Top 10 podle počtu bitev</li>
              <li><b>Detail tanku</b> – mini grafy (podíl výher/proher, DMG/AVG/fragy)</li>
              <li><b>Porovnání hráčů</b> – KPI A vs B + porovnávací graf</li>
              <li><b>Žebříček</b> – zadaný seznam přezdívek (WR / bitvy / DMG / Avg)</li>
              <li><b>Klanové statistiky</b> – hlavička + vzorek členů s WR</li>
              <li><b>Poslední bitvy</b> – rozdíl od uloženého snapshotu (lokálně)</li>
              <li><b>Tmavý režim</b> + <b>animace načítání</b></li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold mb-2">Jak používat</h4>
            <ol class="list-decimal ml-6 space-y-1 text-slate-300">
              <li>Zadej přezdívku a klikni <b>Hledat hráče</b> (nebo URL <code>?player=Nick</code>).</li>
              <li>V <b>Garáži</b> otevři <i>Detail tanku</i> pro podrobnosti.</li>
              <li>Pro <b>Poslední bitvy</b>: nejdřív <b>Uložit snapshot</b>, po hraní <b>Vyhodnotit</b>.</li>
              <li><b>Porovnání</b>: vyplň dva nicky → <b>Porovnat</b>.</li>
              <li><b>Žebříček</b>: vlož nicky oddělené čárkou a zvol metriku.</li>
            </ol>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-4 mt-4">
          <div>
            <h4 class="font-semibold mb-2">Soukromí & data</h4>
            <ul class="list-disc ml-6 space-y-1 text-slate-300">
              <li>Data z veřejného <b>WG API</b> (EU/NA/ASIA/RU).</li>
              <li>Žádný backend. <b>Snapshot</b> je jen v <b>localStorage</b> prohlížeče.</li>
              <li>Když API vrátí chybu/timeout, zkus to znovu později.</li>
            </ul>
          </div>
          <div>
            <h4 class="font-semibold mb-2">Limity & poznámky</h4>
            <ul class="list-disc ml-6 space-y-1 text-slate-300">
              <li>WG API nedává kompletní historii „posledních bitev“ — tahle sekce je počítaná jako rozdíl „snapshot → teď“.</li>
              <li>Některá data u účtů/vozidel nemusí být dostupná nebo jsou opožděná.</li>
              <li>Projekt není oficiálně spojen s Wargamingem.</li>
            </ul>
          </div>
        </div>

        <h4 class="font-semibold mt-4 mb-2">Changelog (stručně)</h4>
        <ul class="list-disc ml-6 space-y-1 text-slate-300">
          <li><b>v5</b> – Poslední bitvy / aktivita od snapshotu</li>
          <li><b>v4</b> – Porovnání, Žebříček, grafy garáže, Klany, barvy a emotikony tříd</li>
          <li><b>v3</b> – Stabilizace (modály na &lt;div&gt;, fix JS), tmavé Chart.js</li>
          <li><b>v2</b> – Tiers & Top bitvy, lokální trendy, spinner</li>
          <li><b>v1</b> – Hledání hráče, KPI, garáž, základní grafy</li>
        </ul>

        <p class="text-slate-400 text-xs mt-4">
          Máš nápad nebo bug? Napiš mi do chatu a doplním.
        </p>
      </div>
    </div>
  </div>

  <!-- ... zbytek stránky (hledání hráče, KPI, garáž, snapshoty, modály, JS logika) ... -->
