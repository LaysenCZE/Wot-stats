import React, { useMemo, useState } from "react";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter } from "@/components/ui/dialog";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { Separator } from "@/components/ui/separator";
import { Badge } from "@/components/ui/badge";
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from "@/components/ui/tooltip";
import { Info, Search, Swords, Target, BarChart3, Gauge, Trophy, CircleX, TrendingUp } from "lucide-react";
import {
BarChart,
Bar,
XAxis,
YAxis,
ResponsiveContainer,
Tooltip as RTooltip,
Legend,
CartesianGrid,
LineChart,
Line,
} from "recharts";


/**
* WoT Stats – Dark Epic Dashboard
* - Tmavý vzhled
* - Průměr DMG, Zničené tanky, Celkové hraní, Win/Loss graf
* - Tank obrázek (inline SVG)
* - Tlačítko „Hledat hráče“ + vyhledávací pole
* - Tlačítko „INFORMACE“ (modal s changelogem/novinkami)
* - Připraveno pro napojení na API (TODO sekce níže)
*/


const demoMatches = [
{ month: "Leden", vyhry: 42, prohry: 28 },
{ month: "Únor", vyhry: 38, prohry: 31 },
{ month: "Březen", vyhry: 45, prohry: 25 },
{ month: "Duben", vyhry: 47, prohry: 33 },
{ month: "Květen", vyhry: 50, prohry: 29 },
{ month: "Červen", vyhry: 41, prohry: 30 },
{ month: "Červenec", vyhry: 52, prohry: 27 },
];


const demoStats = {
avgDmg: 2175,
destroyed: 1389,
battles: 3250,
winrate: 57.2,
};


function TankSVG({ className = "w-full h-full" }: { className?: string }) {
return (
<svg
className={className}
viewBox="0 0 512 256"
fill="currentColor"
xmlns="http://www.w3.org/2000/svg"
aria-hidden
>
<g opacity="0.15">
<rect x="0" y="200" width="512" height="20" rx="10" />
</g>
<g>
<path d="M64 180h320c28 0 44-24 44-44v-6l28-8c10-3 16-14 13-24-3-10-14-16-24-13l-17 5V73c0-11-9-20-20-20h-58c-5 0-9 4-9 9v26H216l-33-18c-5-3-12-1-15 4l-13 24H64c-18 0-32 14-32 32v20c0 18 14 32 32 32z"/>
<circle cx="124" cy="180" r="24" />
<circle cx="204" cy="180" r="24" />
<circle cx="284" cy="180" r="24" />
<circle cx="364" cy="180" r="24" />
</g>
</svg>
);
}


export default function WotStatsDarkEpic() {
const [playerQuery, setPlayerQuery] = useState("");
const [infoOpen, setInfoOpen] = useState(false);


// Derivované metriky (můžete nahradit reálnými daty)
const lossesTotal = useMemo(
() => demoMatches.reduce((acc, m) => acc + m.prohry, 0),
[]
);
const winsTotal = useMemo(
